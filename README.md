# XPath增强版工具使用说明

## 功能概述

XPath增强版工具是一款功能强大的HTML分析工具，提供可视化HTML树结构和智能XPath生成功能。

## 文件结构

- `xpath_gui_enhanced.py` - 增强版GUI主程序
- `xpath_cli.py` - 命令行版本
- `xpath_tools.py` - 统一入口程序
- `beta1.x/` - 原始版本备份文件夹
- `test.html` - 测试用HTML文件

## 安装依赖

```bash
pip install -r requirements.txt
```

## 使用方法

### 1. 增强版GUI（推荐）

提供三栏布局的可视化界面：

- **左侧**：HTML树结构视图
- **中间**：自动生成的XPath列表
- **右侧**：统计信息和详细信息

启动命令：

```bash
python xpath_gui_enhanced.py
# 或
python xpath_tools.py gui
```

#### 增强版GUI功能详解

##### HTML树结构视图

- **一键展开**：点击"一键展开"按钮，瞬间展开所有HTML树节点
- **展开全部**：逐步展开所有节点
- **收起全部**：一键收起所有节点
- **清除高亮**：清除所有高亮显示
- **自动展开**：分析完成后自动展开第一层和第二层节点

##### XPath列表功能

- **双击高亮**：双击XPath自动高亮对应的HTML树节点
- **右键菜单**：
  - 复制XPath
  - 复制元素描述
  - 高亮对应元素
  - 查看元素详情
- **批量操作**：
  - 复制选中XPath
  - 复制所有XPath（带编号和描述）
  - 导出到文件

##### 智能交互

- **节点高亮**：点击XPath时，对应HTML树节点会高亮显示
- **详细信息**：显示选中元素的完整属性、文本内容等
- **统计信息**：按元素类型统计数量和总数

### 2. 命令行版本

```bash
python xpath_cli.py 文件名.html
python xpath_cli.py 文件名.html -c  # 自动复制所有XPath到剪贴板
python xpath_cli.py 文件名.html -o 输出.txt  # 保存到文件
```

### 3. 统一入口

```bash
python xpath_tools.py gui  # 启动增强版GUI
python xpath_tools.py cli 文件名.html  # 命令行模式
python xpath_tools.py help  # 显示帮助
```

## 支持的元素类型

工具支持16种常用HTML元素类型：

1. **链接** (`a`) - 超链接元素
2. **按钮** (`button`) - 交互按钮
3. **输入框** (`input`) - 表单输入
4. **表单** (`form`) - 表单容器
5. **容器** (`div`) - 布局容器
6. **文本** (`span`) - 文本元素
7. **图片** (`img`) - 图像元素
8. **表格** (`table`) - 数据表格
9. **下拉框** (`select`) - 下拉选择
10. **文本域** (`textarea`) - 多行文本输入
11. **标题** (`h1`, `h2`, `h3`) - 各级标题
12. **段落** (`p`) - 文本段落
13. **列表** (`ul`, `li`) - 无序列表和列表项

## XPath生成策略

工具为每个元素生成5种XPath类型：

1. **ID路径** - 基于ID属性的唯一路径
2. **Class路径** - 基于Class属性的路径
3. **属性路径** - 基于多个属性的组合路径
4. **文本路径** - 基于文本内容的精确匹配
5. **位置路径** - 基于元素位置的相对路径

## 复制和导出功能

- **剪贴板复制**：支持单个XPath、描述、批量复制
- **文件导出**：支持.txt和.csv格式，包含完整统计信息
- **格式丰富**：导出文件包含元素描述、XPath类型、HTML结构等信息

## 测试示例

使用提供的`test.html`文件测试功能：

1. 启动增强版GUI
2. 选择`test.html`文件
3. 点击"分析"按钮
4. 体验一键展开、节点高亮、XPath复制等功能

## 常见问题

### Q: 为什么HTML树结构不显示？

A: 请确保选择了有效的HTML文件，文件编码为UTF-8。

### Q: 如何快速找到特定元素？

A: 使用"一键展开"功能展开所有节点，然后在XPath列表中双击对应项，系统会自动高亮对应的HTML树节点。

### Q: 可以复制所有XPath吗？

A: 是的，支持批量复制所有XPath到剪贴板，也可以导出到文件。

### Q: 支持哪些文件格式？

A: 支持.html、.htm等HTML文件格式，导出支持.txt和.csv格式。

### Q: 如何清除高亮显示？

A: 点击"清除高亮"按钮即可清除所有高亮显示。

## 版本历史

- **v2.0** - 增强版发布
  - 新增HTML树结构可视化
  - 增加一键展开功能
  - 优化节点高亮交互
  - 改进用户体验
- **v1.0** - 原始版本
  - 基础XPath生成功能
  - 命令行和GUI支持
